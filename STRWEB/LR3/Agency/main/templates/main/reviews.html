{% extends 'main/layout.html' %}

{% block title %}Отзывы{% endblock %}

{% block content %}
    <h1>Отзывы</h1>

    {% if user.is_authenticated %}
    <h2>Оставить отзыв</h2>
    <form method="POST" action="{% url 'reviews' %}">
        {% csrf_token %}
        <label for="rating">Оценка (от 1 до 5):</label>
        <input type="number" id="rating" name="rating" class="rating-input" min="1" max="5" required>
        <br>
        <label for="text">Текст отзыва:</label>
        <textarea id="text" name="text" class="text-input" required></textarea>
        <br>
        <button type="submit" class="submit-button">Отправить</button>
    </form>
    {% else %}
        <p>Для оставления отзыва необходимо <a href="{% url 'login' %}">войти</a>.</p>
    {% endif %}

    <h2>Все отзывы</h2>
    {% if reviews %}
        <ul style="list-style-type: none; padding: 0;">
            {% for review in reviews %}
                <li class="review-item">
                    <strong class="review-author">{{ review.user.username }}</strong> - {{ review.rating }} 
                    <em class="review-date">{{ review.created_at|date:"d.m.Y H:i" }}</em>
                    <p>{{ review.text }}</p>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Нет доступных отзывов.</p>
    {% endif %}
{% endblock %}