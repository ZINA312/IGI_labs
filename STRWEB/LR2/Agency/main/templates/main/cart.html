{% extends 'main/layout.html' %}
{% load static %}

{% block title %}Корзина{% endblock %}

{% block content %}
    <div style="max-width: 800px; margin: auto; padding: 20px;">
        <h1 style="font-family: Arial, Helvetica, sans-serif; color: #333;">Корзина</h1>
        
        {% if cart.items.count > 0 %}
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr>
                        <th style="border: 1px solid #ddd; padding: 8px;">Товар</th>
                        <th style="border: 1px solid #ddd; padding: 8px;">Количество</th>
                        <th style="border: 1px solid #ddd; padding: 8px;">Цена</th>
                        <th style="border: 1px solid #ddd; padding: 8px;">Действия</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in cart.items.all %}
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 8px;">{{ item.property.title }}</td>
                            <td style="border: 1px solid #ddd; padding: 8px;">
                                <form method="POST" action="{% url 'update_cart_item' item.id %}">
                                    {% csrf_token %}
                                    <input type="number" name="quantity" value="{{ item.quantity }}" min="1" style="width: 50px;">
                                    <button type="submit" style="padding: 5px;">Обновить</button>
                                </form>
                            </td>
                            <td style="border: 1px solid #ddd; padding: 8px;">{{ item.property.price }} руб.</td>
                            <td style="border: 1px solid #ddd; padding: 8px;">
                                <form method="POST" action="{% url 'remove_from_cart' item.id %}">
                                    {% csrf_token %}
                                    <button type="submit" style="padding: 5px; background-color: red; color: white;">Удалить</button>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div style="margin-top: 20px;">
                <a href="{% url 'checkout' %}" style="padding: 10px; background-color: #3498db; color: white; border-radius: 5px; text-decoration: none;">Оплатить</a>
            </div>
            
        {% else %}
            <p style="font-family: Arial, Helvetica, sans-serif;">Ваша корзина пуста.</p>
        {% endif %}
    </div>
{% endblock %}